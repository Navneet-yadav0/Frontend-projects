<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Frontend quiz</title>
<style>
:root{
  --bg-gradient: linear-gradient(135deg,#ff0084,#5a00ff);
  --panel-bg: rgba(255,255,255,0.08);
  --panel-border: rgba(255,255,255,0.2);
  --text-color: #ffffff;
  --input-bg: rgba(255,255,255,0.2);
  --option-bg: rgba(255,255,255,0.15);
  --option-hover: rgba(255,255,255,0.25);
  --button-bg: linear-gradient(135deg,#ff0f7b,#f89b29);
  --button-shadow: rgba(255,0,120,0.6);
}
.light{
  --bg-gradient: linear-gradient(135deg,#ffffff,#d7d7d7);
  --panel-bg: rgba(0,0,0,0.07);
  --panel-border: rgba(0,0,0,0.15);
  --text-color: #000000;
  --input-bg: rgba(0,0,0,0.08);
  --option-bg: rgba(0,0,0,0.1);
  --option-hover: rgba(0,0,0,0.15);
  --button-bg: linear-gradient(135deg,#0072ff,#00c6ff);
  --button-shadow: rgba(0,162,255,0.5);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Poppins,system-ui,Segoe UI,Roboto,Arial;
  background:var(--bg-gradient);
  color:var(--text-color);
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:40px 20px;
  transition:0.35s;
}
.app-wrap{
  width:980px;
  max-width:98vw;
  display:flex;
  flex-direction:column;
  gap:22px;
  position:relative;
}
.theme-toggle{
  position:absolute;
  right:0;
  top:-36px;
  padding:8px 14px;
  border-radius:20px;
  background:var(--panel-bg);
  border:1px solid var(--panel-border);
  cursor:pointer;
  color:var(--text-color);
  font-weight:600;
  backdrop-filter:blur(8px);
}
.panel{
  background:var(--panel-bg);
  padding:34px;
  border-radius:20px;
  backdrop-filter: blur(12px);
  border:1px solid var(--panel-border);
  box-shadow: 0 20px 40px rgba(0,0,0,0.28);
  transition:0.35s;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.panel{animation:fadeIn .45s ease}
.hidden{display:none}
h1,h2,h3{margin:0}
.button{
  width:100%;
  padding:12px 16px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  margin-top:14px;
  background:var(--button-bg);
  box-shadow:0 6px 18px var(--button-shadow);
  color:#fff;
}
input{
  width:100%;padding:12px;border-radius:12px;border:none;
  background:var(--input-bg);color:var(--text-color);
  margin-bottom:12px;font-size:15px
}
.input-error{animation:shake .28s ease;box-shadow:0 0 12px #ff4d4d}
@keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-6px)}100%{transform:translateX(0)}}
.option{
  padding:14px;border-radius:12px;background:var(--option-bg);
  margin:10px 0;cursor:pointer;transition:.22s;color:var(--text-color)
}
.option:hover{background:var(--option-hover)}
.correctOpt{background:#00ffcc !important;color:#000;box-shadow:0 0 14px #00ffcc}
.wrongOpt{background:#ff4d4d !important;color:#fff;box-shadow:0 0 14px #ff4d4d}
#options{margin-top:12px}
.timer-box{
  margin-top:12px;
  font-weight:800;
  font-size:14px;
  color:var(--text-color);
  opacity:0.95;
}
.nav-arrows{
  display:flex;justify-content:space-between;margin-top:8px;
  color:var(--text-color);opacity:0.85;font-size:20px
}
.muted-small{opacity:0.85;font-weight:600}
</style>
</head>
<body>

<div class="app-wrap">

  
  <div class="theme-toggle" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</div>

  
  <div id="userDetails" class="panel">
    <h1>Welcome</h1>
    <p style="opacity:.9">Enter details to start the quiz.</p>

    <input type="text" id="name" placeholder="Your Name">
    <input type="email" id="email" placeholder="Email Address">

    <div style="position:relative;">
      <input type="password" id="password" placeholder="Password">
      <span style="position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;color:var(--text-color);font-weight:700"
            onclick="togglePassword()">üëÅ</span>
    </div>

    <button class="button" onclick="saveDetails()">Continue</button>
  </div>

  
  <div id="landing" class="panel hidden">
    <h2>Quiz Instructions</h2>
    <ul style="margin-top:10px;line-height:1.6">
      <li>15 total questions</li>
      <li>One answer per question</li>
      <li>No negative marking</li>
    </ul>
    <button class="button" onclick="startTest()">Start Test</button>
  </div>

  
  <div id="quiz" class="panel hidden">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <div>
        <h2 id="qNo">Question</h2>
        <p id="questionText" style="margin-top:8px"></p>
      </div>
      
      <div class="timer-box muted-small" id="timerBox">Time Left: 10s</div>
    </div>

    <div id="options"></div>

    <button class="button hidden" id="nextBtn" onclick="nextQuestion()">Next ‚ûú</button>
    <button class="button hidden" id="submitBtn" onclick="submitTest()">Submit ‚úî</button>

    <div class="nav-arrows" style="margin-top:14px">
      <span>‚¨Ö</span>
      <span>‚û°</span>
    </div>
  </div>

  
  <div id="result" class="hidden">
    <div class="panel">
      <h2>Your Score</h2>
      <h3 id="scoreText" style="margin-top:6px"></h3>
      <button class="button" onclick="restartQuiz()">Restart</button>
    </div>

    <div class="panel" style="margin-top:14px">
      <h3>Review Answers</h3>
      <div id="review" style="margin-top:10px"></div>
    </div>
  </div>

</div>


<audio id="rightSound" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" preload="auto"></audio>
<audio id="wrongSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-buzz-950.mp3" preload="auto"></audio>

<script>

const QUESTION_TIME = 10; // seconds
const PAUSE_AFTER_ANSWER = 900; 
const TOTAL_QUESTIONS = 15;


const questionBank=[
  { text:"What does HTML stand for?", options:["HyperText Markup Language","HighText Machine Language","HyperTool Multi Language","None"], correct:0 },
  { text:"Which tag adds line break?", options:["<break>","<br>","<lb>","<line>"], correct:1 },
  { text:"CSS used for?", options:["Styling","Database","Backend","None"], correct:0 },
  { text:"JavaScript is a?", options:["Server-side","Client-side scripting","Database","Markup"], correct:1 },
  { text:"Which tag is hyperlink?", options:["<link>","<a>","<href>","<url>"], correct:1 },
  { text:"Bootstrap is a?", options:["Backend","CSS Framework","Library","Tool"], correct:1 },
  { text:"CSS property for text color?", options:["color","text-color","font-color","bg"], correct:0 },
  { text:"Declare variable?", options:["var","let","const","All"], correct:3 },
  { text:"Remove last array item?", options:["pop()","push()","shift()","unshift()"], correct:0 },
  { text:"Italic text tag?", options:["<italic>","<i>","<it>","<em>"], correct:1 },
  { text:"Largest heading?", options:["<h1>","<h6>","<head>","<heading>"], correct:0 },
  { text:"Image alt text attribute?", options:["alt","src","title","name"], correct:0 },
  { text:"querySelector() does?", options:["Select first element","Select all","Create element","Delete element"], correct:0 },
  { text:"Create JS function?", options:["function = my()","function my()","function: my()","my = function()"], correct:1 },
  { text:"Event when clicked?", options:["onclick","onhover","onpress","onselect"], correct:0 }
];


function getRandom15(){ return questionBank.slice().sort(()=>Math.random()-0.5).slice(0, TOTAL_QUESTIONS); }
function escapeHTML(str){ return String(str).replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

let questions = [], index = 0, answered = false, responses = [];
let timerInterval = null, timeLeft = QUESTION_TIME;


const userDetails = document.getElementById('userDetails');
const landing = document.getElementById('landing');
const quiz = document.getElementById('quiz');
const result = document.getElementById('result');

const qNo = document.getElementById('qNo');
const questionText = document.getElementById('questionText');
const optionsWrap = document.getElementById('options');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const timerBox = document.getElementById('timerBox');

const scoreText = document.getElementById('scoreText');
const review = document.getElementById('review');

const rightSound = document.getElementById('rightSound');
const wrongSound = document.getElementById('wrongSound');


function toggleTheme(){ document.body.classList.toggle('light'); localStorage.setItem('QUIZ_THEME', document.body.classList.contains('light') ? 'light' : 'dark'); }
window.addEventListener('load', ()=> { if(localStorage.getItem('QUIZ_THEME')==='light') document.body.classList.add('light'); });
function togglePassword(){ const p = document.getElementById('password'); p.type = p.type === 'password' ? 'text' : 'password'; }


function saveDetails(){
  const n=document.getElementById('name'), e=document.getElementById('email'), p=document.getElementById('password');
  let ok=true;
  [n,e,p].forEach(inp=>{ if(!inp.value.trim()){ inp.classList.add('input-error'); setTimeout(()=>inp.classList.remove('input-error'),380); ok=false; }});
  if(!ok) return;
  localStorage.setItem('QUIZ_USER', JSON.stringify({ name:n.value, email:e.value }));
  userDetails.classList.add('hidden');
  landing.classList.remove('hidden');
}

function startTest(){
  landing.classList.add('hidden');
  quiz.classList.remove('hidden');
  questions = getRandom15();
  index = 0;
  responses = [];
  loadQuestion();
}


function startTimer(){
  clearTimer();
  timeLeft = QUESTION_TIME;
  updateTimerUI();
  timerInterval = setInterval(()=>{
    timeLeft--;
    updateTimerUI();
    if(timeLeft <= 0){
      clearTimer();
      handleTimeOut();
    }
  }, 1000);
}
function clearTimer(){ if(timerInterval){ clearInterval(timerInterval); timerInterval = null; } }
function updateTimerUI(){ timerBox.textContent = `Time Left: ${timeLeft}s`; }


function loadQuestion(){
  clearTimer();
  answered = false;
  const q = questions[index];
  qNo.innerText = `Question ${index+1} / ${TOTAL_QUESTIONS}`;
  questionText.innerText = escapeHTML(q.text);
  optionsWrap.innerHTML = '';
  q.options.forEach((opt, i)=>{
    const d = document.createElement('div');
    d.className = 'option';
    d.tabIndex = 0;
    d.textContent = opt;
    d.onclick = ()=> handleSelect(d, i);
    d.onkeydown = (e)=> { if(e.key === 'Enter') handleSelect(d, i); };
    optionsWrap.appendChild(d);
  });
  nextBtn.classList.add('hidden');
  submitBtn.classList.add('hidden');
  startTimer();
}

function disableOptions(){
  const opts = optionsWrap.querySelectorAll('.option');
  opts.forEach(o=> { o.classList.add('disabled'); o.setAttribute('aria-disabled','true'); o.style.pointerEvents='none'; });
}

function enableOptions(){
  const opts = optionsWrap.querySelectorAll('.option');
  opts.forEach(o=> { o.classList.remove('disabled'); o.removeAttribute('aria-disabled'); o.style.pointerEvents='auto'; });
}

function handleSelect(elem, chosenIdx){
  if(answered) return;
  answered = true;
  clearTimer();
  const q = questions[index];
  const correctIdx = q.correct;
  const optionDivs = Array.from(optionsWrap.children);

  if(chosenIdx === correctIdx){
    elem.classList.add('correctOpt');
    safePlay(rightSound);
  } else {
    elem.classList.add('wrongOpt');
    if(optionDivs[correctIdx]) optionDivs[correctIdx].classList.add('correctOpt');
    safePlay(wrongSound);
  }

  disableOptions();
  responses.push({ user_answer: chosenIdx, correct_answer: correctIdx });

  
  if(index === TOTAL_QUESTIONS - 1) submitBtn.classList.remove('hidden');
  else nextBtn.classList.remove('hidden');

 
}


function handleTimeOut(){
  if(answered) return; 
  answered = true;
  const q = questions[index];
  const correctIdx = q.correct;
  const optionDivs = Array.from(optionsWrap.children);

  
  if(optionDivs[correctIdx]) optionDivs[correctIdx].classList.add('correctOpt');

  
  safePlay(wrongSound);

  
  responses.push({ user_answer: null, correct_answer: correctIdx });

  disableOptions();
  
  timerBox.textContent = `Time's up ‚Äî moving on`;

  
  setTimeout(()=>{
    if(index < TOTAL_QUESTIONS - 1){
      index++;
      loadQuestion();
    } else {
      submitTest();
    }
  }, PAUSE_AFTER_ANSWER);
}


function safePlay(audioEl){
  try{
    audioEl.currentTime = 0;
    const p = audioEl.play();
    if(p && p.catch) p.catch(()=>{});
  }catch(e){}
}


function nextQuestion(){
  clearTimer();
  if(index < TOTAL_QUESTIONS - 1){
    index++;
    loadQuestion();
  } else {
    submitTest();
  }
}

function submitTest(){
  clearTimer();
  quiz.classList.add('hidden');
  result.classList.remove('hidden');

  const score = responses.reduce((sum, r) => sum + ((r.user_answer !== null && r.user_answer === r.correct_answer) ? 1 : 0), 0);
  scoreText.innerText = `${score} / ${TOTAL_QUESTIONS}`;

  
  let html = '';
  questions.forEach((q,i)=>{
    const r = responses[i] || { user_answer: null, correct_answer: q.correct };
    const u = r.user_answer;
    const c = r.correct_answer;
    const userTxt = (u === null || u === undefined) ? 'No answer' : escapeHTML(q.options[u]);
    const correctTxt = escapeHTML(q.options[c]);
    const yourColor = (u === c) ? '#00ffcc' : '#ff4d4d';
    html += `
      <div class="panel" style="margin-top:12px">
        <b>Q${i+1}:</b> ${escapeHTML(q.text)} <br>
        <span style="color:#00ffcc;"><b>Correct:</b> ${correctTxt}</span><br>
        <span style="color:${yourColor}"><b>Your:</b> ${escapeHTML(userTxt)}</span>
      </div>
    `;
  });
  review.innerHTML = html;
}

function restartQuiz(){ location.reload(); }


(function init(){
  
  landing.classList.add('hidden');
  quiz.classList.add('hidden');
  result.classList.add('hidden');

  userDetails.classList.remove('hidden');
})();
</script>
</body>
</html>
